{% extends "frontend/layout/inner_layout.html" %}
{% block contents %}
{% load static %}
{% load humanize %}
<style>
    /*********************** Demo - 1 *******************/
    .box1 img,.box1:after,.box1:before{width:100%;transition:all .3s ease 0s}
    .box1 .icon,.box2,.box3,.box4,.box5 .icon li a{text-align:center}
    .box10:after,.box10:before,.box1:after,.box1:before,.box2 .inner-content:after,.box3:after,.box3:before,.box4:before,.box5:after,.box5:before,.box6:after,.box7:after,.box7:before{content:""}
    .box1,.box11,.box12,.box13,.box14,.box16,.box17,.box18,.box2,.box20,.box21,.box3,.box4,.box5,.box5 .icon li a,.box6,.box7,.box8{overflow:hidden}
    .box1 .title,.box10 .title,.box4 .title,.box7 .title{letter-spacing:1px}
    .box3 .post,.box4 .post,.box5 .post,.box7 .post{font-style:italic}
    .mt-30{margin-top:30px}
    .mt-40{margin-top:40px}
    .mb-30{margin-bottom:30px}
    .box1 .icon,.box1 .title{margin:0;position:absolute}
    .box1{box-shadow:0 0 3px rgba(0,0,0,.3);position:relative}
    .box1:after,.box1:before{height:50%;background:rgba(0,0,0,.5);position:absolute;top:0;left:0;z-index:1;transform-origin:100% 0;transform:rotateZ(90deg)}
    .box1:after{top:auto;bottom:0;transform-origin:0 100%}
    .box1:hover:after,.box1:hover:before{transform:rotateZ(0)}
    .box1 img{height:auto;transform:scale(1) rotate(0)}
    .box1:hover img{filter:sepia(80%);transform:scale(1.3) rotate(10deg)}
    .box1 .title{font-size:19px;font-weight:600;color:#fff;text-transform:uppercase;text-shadow:0 0 1px #004cbf;bottom:10px;left:10px;opacity:0;z-index:2;transform:scale(0);transition:all .5s ease .2s}
    .box1:hover .title{opacity:1;transform:scale(1)}
    .box1 .icon{padding:7px 5px;list-style:none;background:#004cbf;border-radius:0 0 0 10px;top:-100%;right:0;z-index:2;transition:all .3s ease .2s}
    .box1:hover .icon{top:0}
    .box1 .icon li{display:block;margin:10px 0}
    .box1 .icon li a{display:block;width:35px;height:35px;line-height:35px;border-radius:10px;font-size:18px;color:#fff;transition:all .3s ease 0s}
    .box2 .icon li a,.box3 .icon a:hover,.box4 .icon li a:hover,.box5 .icon li a,.box6 .icon li a{border-radius:50%}
    .box1 .icon li a:hover{color:#fff;box-shadow:0 0 10px #000 inset,0 0 0 3px #fff}
    @media only screen and (max-width:990px){.box1{margin-bottom:30px}
    }

    /*********************** Demo - 4 *******************/
    .box4{position:relative}
    .box4:before{width:0;height:200%;background:rgba(0,0,0,.5);position:absolute;top:0;left:-250px;bottom:0;transform:skewX(-36deg);transition:all .5s ease 0s}
    .box4:hover:before{width:200%}
    .box4 img{width:100%;height:auto}
    .box4 .box-content{width:100%;height:100%;padding-top:55%;position:absolute;top:0;left:0;transform:scale(0);transition:all .3s ease 0s}
    .box4 .icon,.box5 .icon{list-style:none;padding:0}
    .box4:hover .box-content{transform:scale(1)}
    .box4 .title{font-size:22px;font-weight:700;color:#fff;margin:0 0 10px}
    .box4 .post{display:block;font-size:15px;font-weight:600;color:#fff;margin-bottom:20px;}
    .box4 .icon{margin:0}
    .box4 .icon li{display:inline-block}
    .box4 .icon li a{display:block;width:35px;height:35px;line-height:35px;font-size:20px;background:#fff;color:#ee4266;margin-right:10px;transition:all .3s ease 0s}
    .box5 .icon,.box5 .icon li{display:inline-block}
    @media only screen and (max-width:990px){.box4{margin-bottom:30px}
    }
    @media only screen and (max-width:767px){.box4:before{left:-400px}
    .box4:hover:before{width:300%}
    }

    .box4{
        margin-bottom:10px;
        width:100%;
    }
    .box4 img{
        border-radius:10px;
        /*height:200px;*/
    }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<section class="sptb">
    <div class="container" style="margin-top:55px;">
        <div class="row">
            <!--Left Side Content-->
            <div class="col-xl-9 col-lg-8 col-md-12 col-sm-12 col-xs-12">
                <!--Add lists-->
                <div class=" mb-lg-0">
                    <div class="">
                        <div class="item2-gl ">
                            <div class=" mb-0">
                                <div class="" style="margin-bottom: -20px;">
                                    <div class="p-5 bg-white item2-gl-nav d-flex">
                                        <div class="d-flex">
                                            <label class="mr-2 mt-1 mb-sm-1">Sort :</label>
                                            <select name="item" class="form-control select-sm w-75" id="sort_by">
                                                <option value="0">Select To sort</option>
                                                <option value="1">Latest</option>
                                                <option value="2">Oldest</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-content">
                                <div class="row">
                                    {% for dreamer in getUsers %}
                                    <div class="col-md-4 col-sm-6">
                                        <div class="box4">
                                            <img src="/{{dreamer.image}}" style="height: 250px;">
                                            <div class="box-content">
                                                <h3 class="title">{{dreamer.user_id.username}}</h3>
                                                <span class="" style="color:white">{{dreamer.country}}</span>
                                                <ul class="icon">
                                                    <li><a href="/idea/list/{{dreamer.user_id_id}}"><i class="fa fa-search"></i></a></li>
                                                    <li><a href="/idea/list/{{dreamer.user_id_id}}"><i class="fa fa-link"></i></a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--/Add lists-->
            </div>
            <!--Right Side Content-->
            <div class="col-xl-3 col-lg-4 col-md-12">
                <div class="card" style="height: 79px;">
                    <div class="card-body">
                        <form action="{% url 'search_idea' %}" method="GET" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="input-group">
                                <input type="text" class="form-control br-tl-3  br-bl-3" placeholder="Idea Title" name="search_title">
                                <div class="input-group-append ">
                                    <button type="submit" class="btn btn-primary br-tr-3  br-br-3">
                                        Search
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Latest Ideas</h3>
                    </div>
                    <style>
                        ul li a span:hover {
                            /*color:red !important;*/
                            /*background-color:#ec1f27;*/
                            color:white !important;
                        }
                        .category:hover{
                            background-color:#ec1f27;
                        }
                    </style>
                    <div class="card-body">
                        {% for latest_idea in get_latest_idea %}
                        <div class="row">
                            <div class="col-5" id="latestIdea{{latest_idea.id}}">

                            </div>
                            <div class="col-7">
                                <h4>{{latest_idea.title}}</h4>
                                <p>{{latest_idea.sub_title}}</p>
                            </div>
                        </div>

                        <script>
            		        $.ajaxSetup({
            		                    headers: {
            		                        'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
            		                    }
            		                });
                            $.ajax({
                                url: "/dreamer/idea/image"+'/'+{{latest_idea.id}},
                                method: 'get',

                                success: function(result){
                                    console.log(result);
                                    $('#latestIdea').empty();
                                    $('#latestIdea{{latest_idea.id}}').html('<img src="/'+result[0].Image+'" class="cover-image" style="width:100%;">');
                                }
                            });
            			</script>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}